<div
  class="automata-canvas-wrapper"
  [class.automata-canvas-wrapper--painting]="isPainting || isCursorOverCanvas"
>
  <div class="canvas-frame-top">
    <button
      *ngIf="!isMobileLayout && !isImmersive && !showIdleCountdown"
      #enterImmersiveBtn
      type="button"
      class="canvas-mode-handle canvas-mode-handle--enter"
      aria-label="Enter immersive mode"
      (click)="onEnterImmersiveClick()"
      (mouseenter)="onEnterImmersiveHover(true, enterImmersiveBtn)"
      (mouseleave)="onEnterImmersiveHover(false, enterImmersiveBtn)"
      (focusin)="onEnterImmersiveHover(true, enterImmersiveBtn)"
      (focusout)="onEnterImmersiveHover(false, enterImmersiveBtn)"
    >
      <lucide-icon name="eye" class="canvas-mode-handle__icon" size="16"></lucide-icon>
      <span class="canvas-mode-handle__label">Immersive mode</span>
    </button>
  </div>
  <div class="canvas-top-controls">
    <button
      *ngIf="isMobileLayout"
      type="button"
      class="canvas-icon-button"
      [attr.aria-label]="isMobileFullScreen ? 'Exit full screen' : 'Enter full screen'"
      (click)="isMobileFullScreen ? exitMobileFullScreenClick() : enterMobileFullScreen()"
    >
      <lucide-icon [name]="isMobileFullScreen ? 'minimize-2' : 'maximize-2'" size="16"></lucide-icon>
    </button>
    <button
      #screenshotButton
      type="button"
      class="canvas-icon-button"
      aria-label="Export image"
      (click)="onExportImage()"
      (mouseenter)="onScreenshotHover(true, screenshotButton)"
      (mouseleave)="onScreenshotHover(false, screenshotButton)"
      (focusin)="onScreenshotHover(true, screenshotButton)"
      (focusout)="onScreenshotHover(false, screenshotButton)"
    >
      <lucide-icon name="camera" size="16"></lucide-icon>
    </button>
    <button
      *ngIf="!isMobileLayout"
      type="button"
      class="canvas-icon-button"
      [class.canvas-icon-button--active]="lensEnabled"
      aria-label="Inspector lens (Alt + scroll to zoom)"
      (click)="toggleLens()"
    >
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <circle cx="10.5" cy="10.5" r="5.5"></circle>
        <line x1="15" y1="15" x2="21" y2="21"></line>
      </svg>
    </button>
  </div>
  <canvas
    *ngIf="lensEnabled"
    #lensCanvas
    class="automata-lens"
    aria-hidden="true"
  ></canvas>
  <canvas
    #automataCanvasContainer
    id="automataCanvasContainer"
    class="automata-canvas"
    (pointerdown)="onCanvasPointerDown($event)"
    (pointerup)="onCanvasPointerUp($event)"
    (pointerleave)="onCanvasPointerLeave($event)"
    (pointerenter)="onCanvasPointerEnter($event)"
    (pointermove)="onCanvasPointerMove($event)"
    (wheel)="onCanvasWheel($event)"
  ></canvas>

</div>
